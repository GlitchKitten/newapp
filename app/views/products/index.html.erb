<h3>Products</h3>

    <% cache (cache_key_for_products) do %>
    <% Product.all.each do |p| %>
        <% cache(p) do %>          
            <div class="col-sm-6 col-md-4 col-lg-4">
              <div class = "thumbnail">
                 <%= image_tag(p.image_url)%>
                <div class = "caption">
                    <p><strong><%= p.name%></strong></p>
                    <p><%= p.description %></p>
                    <p><strong>Colour: </strong><%= p.colour %></p>
                    <p><strong>$<%= p.price %></strong></p>         
                    <p><strong>In stock: </strong><%= p.stock %></p>         
                    <p class = "btn btn-default" role = "button"><%= link_to 'More Detail', p %></p>
 
                    <% if signed_in? && current_user.admin? %>
                      <p><%= link_to 'Edit', edit_product_path(p) %></p>
                      <p><%= link_to 'Destroy', p, :method => :delete, data: {confirm: "Are you sure you want to delete?"}%></p>
                    <% end %> 
                </div>
              </div> 
            </div>  
        <%end%>
      <%end%>
    <%end%>
<br>
  
<% if signed_in? && current_user.admin? %>
  <%= link_to 'New Product', new_product_path %>
<% end %>
